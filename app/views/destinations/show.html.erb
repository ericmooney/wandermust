<h1><%= @destination.address %></h1>
<h5>Latitude: <%= @destination.latitude.round(9) %></h5>
<h5>Longitude: <%= @destination.longitude.round(9) %></h5>


<div id='map' class="dark"></div>

<script type='text/javascript'>
 var map = L.mapbox.map('map', 'examples.map-vyofok3q')
     .addControl(L.mapbox.geocoderControl('examples.map-vyofok3q'))
     .setView([<%= @destination.latitude %>, <%= @destination.longitude %>], 6)
     .on('ready', function() {
       new L.Control.MiniMap(L.mapbox.tileLayer('examples.map-uci7ul8p'))
         .addTo(map);
      });

 var feature = {
     type: 'Feature',
     geometry: {
         type: 'Point',
         coordinates: [<%= @destination.longitude %>, <%= @destination.latitude %>]
     },
     properties: {
         title: "<%= @destination.address %>",
         description: "",
         "marker-symbol": "star",
     }
 };

 map.markerLayer.setGeoJSON(feature);

</script>

<% if !@destination.users.include?(current_user) %>
  <%= link_to 'Save this Destination', save_destination_path %>
<% end %>